<!DOCTYPE html>
<html lang="en">

<head>
  <title>IGC USC</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
  <link rel="stylesheet" href="style.css">


  <!-- load the d3.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

  <!-- load csv file -->
  <!-- <script>
    // JavaScript
    const tableBody = document.querySelector('#data-table tbody');
    fetch('Paper List for Portal - Sheet1.csv')
  .then(response => response.text())
  .then(data => {
    console.log(data);
    return data;
  })
  // .then(data => {
  //   const rows = data.trim().split('\n');
  //   const header = rows.shift().split(',');
    
  //   const tableData = rows.map(row => {
  //     const values = row.split(',');
  //     const rowData = {};
      
  //     header.forEach((headerItem, i) => {
  //       rowData[headerItem] = values[i];
  //     });
      
  //     return rowData;
  //   });
    
  //   console.log(tableData); // do something with the data
  // })
  // .catch(error => console.error(error));

  </script> -->
  <script>
    // JavaScript
    const tableBody = document.querySelector('#data-table tbody');
    fetch('Paper List for Portal - Sheet1.csv')
      .then(response => response.text())
      .then(data => {
        const jsonData = Papa.parse(data, { header: true, skipEmptyLines: true }).data;

        jsonData.forEach(row => {
          // do something with each row object
          //console.log(row);
          const title = row['Title'];
          const publication_conference = row['Publication Conference'];
          const link = row['Link'];
          const github = row['github'];
          console.log(authors)
        });

        return jsonData;
      })
      .catch(error => console.error(error));

  </script>



  <style>
    #chartdiv {
      width: 100%;
      height: 550px;
      max-width: 100%;
    }
  </style>



</head>

<body style="background-color: black;">

  <nav class="navbar navbar-expand-md header" style="background-color: black;">

    <a class="navbar-brand" href="#" style="color: #b8860b; font-size: 28px; font-weight: bold;">IGC</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link hover-link" href="index.html">IGC Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link hover-link" href="#about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link hover-link" href="#datasets">Datasets</a>
        </li>
        <li class="nav-item">
          <a class="nav-link hover-link" href="#publications">Publications</a>
        </li>
      </ul>
    </div>

  </nav>
  <div class="container-fluid" style="margin-top: 70px">
    <div class="row">
      <div class="col-md-6">
        <div class="container-fluid bg-cover" style="background-color: black;">
        </div>
      </div>

      <div class="col-md-6">
        <div class="container-fluid d-flex h-100">
          <div class="row justify-content-center align-self-center">

            <div class="text-center">
              <img src="./assets/IGCLogo.svg" alt="My Happy SVG" />
              <hr color="white">

                  <h1 style="color: #D4AC0D; font-weight: bold;" >Imaging Genetics Center</h1>
                  <h5 style="color:  white;"> University of Southern California</h5>
                  <h7 style="color:  gray;"> Marina Del Rey, CA</h7>

            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <hr class="container" color="white">
  <br>
  <div class="container_1"  id="about"></div>
  <div class="container text-center">
    <div class="jombotron">
      <!-- <h6 style="color: #D4AC0D; font-weight: bold;" >IGC's</h6> -->
      <h2 style="color : #D4AC0D"><b>ML for Neuroimaging @ IGC</b></h2>
      <p class="container pt-2 pr-5 pl-5 text-justify" style="color : white"> Welcome to our neuroimaging lab! We
        specialize in using deep learning techniques to analyze and predict neurological conditions such as Alzheimer's,
        Parkinson's, Bipolar Disorder, Major Depressive Disorder, PTSD and Autism. Our team of experts also focuses on
        solving brain analysis problems such as predicting brain age and sex with the help of deep learning based
        computer vision architectures. Our research and development aim to contribute towards the advancement of the
        field of neuroimaging, leading to better diagnosis and treatment options for patients.</p>

    </div>
  </div>
  <br>

  <div class="container">
    <div class="row ">

      <div class="col-md-12 text-sm-right">
        <!-- <button class="btn btn-success btn-sm m-1" style="font-size: 11px;" onclick="startAnimation()"> Start Animation
        </button>
        <button class="btn btn-danger btn-sm m-1" style="font-size: 11px;" onclick="cancelInterval()"> Stop Animation
        </button> -->
        </br>
        <text class="text-sm-left" style="color : white">* Click on End Nodes to see papers</text>
      </div>
      <div id="chartdiv" class="col-md-12 text-sm-center" onclick="cancelInterval()" style="height : 500px;">
      </div>
    </div>
  </div>

  <div class="container">
    <div id="tableForAnimation">

      <!-- Style Transfer table -->
      <div class="container d-none" id="styleTransfer">
        <h4 class="text-center" style="color : white">Papers on Style Transfer</h4>

        <div class="table-responsive">
          <table class="table table-dark table-bordered table-striped text-center">

            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Author</th>
                <th scope="col">Link</th>

              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>Alzheimer's Disease Classification Accuracy is Improved by MRI Harmonization based on
                  Attention-Guided Generative Adversarial Networks</td>
                <td>Surabhi et. al.</td>
                <td><a href="https://pubmed.ncbi.nlm.nih.gov/35340753/">NIH Pubmed</a></td>
              </tr>
              <tr>
                <th scope="row">2</th>
                <td>Scanner Invariant Representations for Diffusion MRI Harmonization</td>
                <td>Daniel et. al.</td>
                <td><a href="https://arxiv.org/abs/1904.05375">Arxiv</a></td>
              </tr>
              <tr>
                <th scope="row">3</th>
                <td>Unsupervised Harmonization Of Brain MRI Using 3D Cycle GANs And Its Effect On Brain Age Prediction
                </td>
                <td>Dheeraj et. al.</td>
                <td><a href="https://www.biorxiv.org/content/10.1101/2022.11.15.516349v1">BioArxiv</a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Dim reuction Tbale -->
      <div class="container d-none" id="DimReduction">
        <h4 class="text-center" style="color : white">Papers on Dimensionality Reduction</h4>
        <div class="table-responsive">
          <table class="table table-dark table-bordered table-striped text-center">

            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Author</th>
                <th scope="col">Link</th>

              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>3D Convolutional Autoencoder for deep latent space embedding based brain age estimation and sex
                  classification on 30,000 UK Biobank MRI scans</td>
                <td>Dheeraj et. al.</td>
                <td><a
                    href="https://drive.google.com/file/d/1lf8JOhND3ykT5q6RxDm1QovtdJqUbGg2/view?usp=share_link">Link</a>
                </td>
              </tr>
              <tr>
                <th scope="row">2</th>
                <td>Nikita</td>
                <td>Nikita et. al.</td>
                <td><a href="">Link</a></td>
              </tr>
              <tr>
                <th scope="row">3</th>
                <td>Wendy</td>
                <td>Wendy et. al.</td>
                <td><a href="">Wendy</a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- 2d CNN models -->
      <div class="container d-none" id="2dmodels">
        <h4 class="text-center" style="color : white">Papers on 2D Models</h4>
        <div class="table-responsive">
          <table class="table table-dark table-bordered table-striped text-center">

            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Author</th>
                <th scope="col">Link</th>

              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>Improved Brain Age Estimation with Slice-based Set Networks</td>
                <td>Umang et. al.</td>
                <td><a href="https://arxiv.org/abs/2102.04438">Arxiv</a></td>
              </tr>
              <tr>
                <th scope="row">2</th>
                <td>Accurate brain age prediction using recurrent slice-based networks</td>
                <td>Pradeep et. al.</td>
                <td><a href="https://www.biorxiv.org/content/10.1101/2020.08.04.235069v1.full.pdf">BioArxiv</a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
  <br>
  <hr class="container" color="white">
  <br>
  <div class="container_1" id="datasets"></div>
  <div class="container text-center">
    <div>
      <h2 style="color : #D4AC0D"><b>Datasets</b></h2>
      <!-- <p class="text-justify" style="color : white"><b style="font-size: 20px;">Pre proceesing: </b> All 3D T1-weighted MRI brain scans are pre-processed using a sequence of steps 
          detailed in <a href="https://arxiv.org/pdf/2011.09115.pdf">Pradeep et .al</a>.
          Scans are processed through a standard processing pipeline consisting of reorientation 
          using <a href = "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5770339/"> Fidel et al.</a>, 
          skull stripping using HDBet [<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6865732/"> 
            Fabian et al.</a>], nonparametric intensity normalization for bias field correction
            using N4BiasCorrection [<a href="https://pubmed.ncbi.nlm.nih.gov/20378467/">Nicholas et al.</a>], 
            and 6-dof linear registration to MNI152 space using <a href = "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5770339/"> 
            FSL </a>FSL. Scans are subsequently down-sampled to 2-mm resolution using ANTS. The final dimensions of each scan are 91x109x109. -->
    </div>
  </div>
  <br>
  <!-- <h4 style="color : white; text-align: center;"><b>List of Datasets for Deep learning Pipeline</b></h4> -->
  <div class="container">
    <div class="table-responsive">
      <table class="table table-dark table-bordered table-striped text-center">

        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">No. of Scans</th>
            <th scope="col">Domain</th>
            <th scope="col">Age Range</th>
            <th scope="col">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>UK Bio Bank</td>
            <td>49,000</td>
            <td>Controls</td>
            <td>44.6 - 80.8</td>
            <td><a href="https://www.ukbiobank.ac.uk/">UKBioBank</a></td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>ADNI</td>
            <td>2,375</td>
            <td>Alzheimer, MCI </td>
            <td>55.1 - 97.4</td>
            <td><a href="http://adni.loni.usc.edu/">ADNI</a></td>
          </tr>
          <tr>
            <th scope="row">3</th>
            <td>WHIMS</td>
            <td>942</td>
            <td>Controls, MCI, Bio. Sex - Female</td>
            <td>65 - 80</td>
            <td><a href="https://sp.whi.org/researchers/data/Pages/WHIMS%20Data.aspx">WHIMS</a></td>
          </tr>
          <tr>
            <th scope="row">4</th>
            <td>AIBL</td>
            <td>1088</td>
            <td>Alzheimer, MCI</td>
            <td>55 - 96</td>
            <td><a href="https://aibl.csiro.au/">AIBL</a></td>
          </tr>
          <tr>
            <th scope="row">5</th>
            <td>OASIS</td>
            <td>435</td>
            <td>Alzheimer, MCI</td>
            <td>18 - 96</td>
            <td><a href="https://www.oasis-brains.org/">OASIS</a></td>
          </tr>
          <tr>
            <th scope="row">6</th>
            <td>PPMI</td>
            <td>610</td>
            <td>Parkinson</td>
            <td>30.6 - 84.9</td>
            <td><a href="https://www.ppmi-info.org/access-data-specimens/download-data/">PPMI</a></td>
          </tr>
          <tr>
            <th scope="row">7</th>
            <td>MCGill</td>
            <td>94</td>
            <td>Parkinson</td>
            <td>38 - 83</td>
            <td><a href="http://rpq-qpn.ca/en/">MCGill</a></td>
          </tr>
          <tr>
            <th scope="row">8</th>
            <td>MCGill</td>
            <td>94</td>
            <td>Parkinson</td>
            <td>38 - 83</td>
            <td><a href="http://rpq-qpn.ca/en/">MCGill</a></td>
          </tr>
          <tr>
            <th scope="row">9</th>
            <td>UPenn</td>
            <td>121</td>
            <td>Parkinson</td>
            <td>50 - 84</td>
            <td>UPenn</a></td>
          </tr>

          <tr>
            <th scope="row">10</th>
            <td>Liege</td>
            <td>157</td>
            <td>Parkinson</td>
            <td>47 - 87</td>
            <td>Leige</a></td>
          </tr>

          <tr>
            <th scope="row">11</th>
            <td>LDM100K</td>
            <td>100,000</td>
            <td>Parkinson</td>
            <td> - </td>
            <td><a href="https://arxiv.org/abs/2209.07162/">LDM100K</a></td>
          </tr>

          <tr>
            <th scope="row">12</th>
            <td>NIMHANS</td>
            <td>323</td>
            <td> - </td>
            <td> - </td>
            <td><a href="https://pubmed.ncbi.nlm.nih.gov/33960571/">NIMHANS</a></td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>


  <br>
  <hr class="container" color="white">

  <br>
  <div class="container_1" id="publications"></div>
  <div class="container" style="text-align: center">
    <h2 style="color : #D4AC0D"><b>Publications</b></h2>
  </div>
  <br>

  <div class="container blur p-5">
    <div class="row">
      <div class="col-md-12">
        <h3 style="color: white; text-align: center; margin-top: 0;">Improved Brain Age Estimation with Slice-based Set
          Networks</h3>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col-md-6">
        <p class="text-justify" style="color: white"><strong style="color: #D4AC0D;">TL;DR - </strong>Deep learning
          architecture for BrainAGE prediction using 2D-CNN models to encode each 2D slice of an MRI and then combining
          the information using set networks or permutation invariant layers. The experiments conducted on the UK
          Biobank dataset showed that the proposed model with permutation invariant layers trains faster and performs
          better than other state-of-the-art approaches for BrainAGE prediction.</p>
        <p class="text-justify" style="color: white"><strong style="color: #D4AC0D;">Published in - </strong>2021 IEEE
          18th International Symposium on Biomedical Imaging (ISBI)</p>
        <br>
        <div class="row">
          <div class="col-md-12 text-left">
            <a href="https://arxiv.org/abs/2102.04438" class="mr-2 hover" target="_blank"
              style="color: #D4AC0D; font-weight: bold;">[Paper]</a>
            <a href="https://github.com/umgupta/2d-slice-set-networks" class="mr-2 ml-3 hover"
              target="_blank" style="color: #D4AC0D; font-weight: bold;">[Code]</a>
            <a href="#" class="mr-0 ml-3 hover" target="_blank" id="poster-link"
              style="color: #D4AC0D; font-weight: bold;">[Poster]</a>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <img class="img-fluid" src="./papersImages/ImprovedBrainAgeSliceNetworksUmang.png" alt="">
      </div>
    </div>
  </div>





  <!-- <div class = "container blur p-5">
        <div class = "row ">
            <div class="col-md-8">
                <h3 style="color : white; text-align: center;">Title</h3>
                  <div id = "halfContent1" >
                    <p style="color : white">
                      Short title
                    </p>
                    <div style="text-align: center;">
                      <button class="btn btn-link" onclick="showMore(1)"> Show More <i class="arrow down m-1"></i></button>
                    </div>
                  </div>
                  
                  <div class="d-none" id = "fullContent1">
                    <p style="color : white" >
                      Deep Learning for neuroimaging data is a promising but challenging direction. The high dimensionality of 3D MRI scans makes this endeavor compute and data-intensive. Most conventional 3D neuroimaging methods use 3D-CNN-based architectures with a large number of parameters and 
                      require more time and data to train. Recently, 2D-slice-based models have received increasing attention as they have fewer parameters and may require fewer samples to achieve comparable performance. In this paper, we propose a new architecture for BrainAGE prediction. The proposed architecture works by encoding each 2D slice in an MRI with a deep 2D-CNN model. Next, it combines the information from these 2D-slice encodings using set networks or permutation invariant layers. Experiments on the BrainAGE prediction problem, using the UK Biobank dataset, showed that the model with the permutation invariant layers trains faster and provides better predictions compared to other state-of-the-art approaches.
                    </p>
                    <div style="text-align: center;">
                      <button class="btn btn-link" onclick="showLess(1)"> Show Less <i class="arrow up m-1"></i></button>
                    </div>

                  </div>  
            </div>

            <div class="col-md-4 ">
                <img class="img-fluid" src="./papersImages/ImprovedBrainAgeSliceNetworksUmang.png"></img>
                <br>
                <br>
                <p style="color : grey; text-align: center;" >Published in: 2021 IEEE 18th International Symposium on Biomedical Imaging (ISBI)  <a href="https://ieeexplore.ieee.org/document/9434081"> Link </a></p>

            </div>
        </div>
    </div> -->

  <br>
  <br>

  <script>
    function showMore(id) {
      document.getElementById("fullContent" + id).classList.remove("d-none");
      document.getElementById("halfContent" + id).classList.add("d-none");
    }

    function showLess(id) {
      document.getElementById("fullContent" + id).classList.add("d-none");
      document.getElementById("halfContent" + id).classList.remove("d-none");
    }


    //   {
    //   window.addEventListener('load', () => {

    //     let chartData = [{
    //       id: 'mriScans',
    //       parent: '',
    //       cls : "layer1",
    //       name: 'Deep Learning Algo.',

    //     },
    //     {
    //       id: 'cnn',
    //       parent: 'mriScans',
    //       name: 'CNN Models',
    //       cls : "layer2",
    //       value: 0,
    //       collapsed :true,
    //       visible :false,
    //       disabled : true,
    //     },
    //     {
    //       id: 'gans',
    //       parent: 'mriScans',
    //       name: 'GANs',
    //       cls : "layer2",
    //       value: "",
    //       "collapsed":true,
    //       "visible":false,
    //     },
    //     {
    //       id: 'dimR',
    //       parent: 'mriScans',
    //       name: 'Dim. Reduction',
    //       cls : "layer2",
    //       value: ""
    //     },
    //     {
    //       id: 'other',
    //       parent: 'mriScans',
    //       name: 'Other Models',
    //       cls : "layer2",
    //       value: ""
    //     },

    //     {
    //       id: '2DCNN',
    //       parent: 'cnn',
    //       name: '2D CNNs',
    //       cls : "layer3",
    //       value: ""
    //     },
    //     {
    //       id: '3DCNN',
    //       parent: 'cnn',
    //       name: '3D CNNs',
    //       cls : "layer3",
    //       value: ""
    //     },
    //     {
    //       id: 'MMCNN',
    //       parent: 'cnn',
    //       name: 'Multi Modal CNNs',
    //       cls : "layer3",
    //       value: ""
    //     },
    //     {
    //       id: 'VIT',
    //       parent: 'cnn',
    //       name: "Vision Transformers", //'<ul><li><a href="https://www.example.com">Link 1</a></li><li><a href="https://www.example.com">Link 2</a></li></ul>',
    //       cls : "layer3",
    //       value: ""
    //     },

    //     {
    //       id: 'VAE',
    //       parent: 'gans',
    //       name: 'VAEs',
    //       cls : "layer3",
    //       value: ""
    //     },
    //     {
    //       id: '2D GANs',
    //       parent: 'gans',
    //       name: '2D Style GANs',
    //       cls : "layer3",
    //       value: ""
    //     },
    //     {
    //       id: '3D GANs',
    //       parent: 'gans',
    //       name: '3D GANs',
    //       cls : "layer3",
    //       value: ""
    //     },

    //     {
    //       id: 'autoEncoders',
    //       parent: 'dimR',
    //       name: 'Auto Encoders',
    //       cls : "layer3",
    //       value: ""
    //     },

    //     {
    //       id: 'PCA',
    //       parent: 'dimR',
    //       name: 'PCA',
    //       cls : "layer3",
    //       value: ""
    //     },

    //     {
    //       id: 'tract',
    //       parent: 'dimR',
    //       name: 'tractography',
    //       cls : "layer3",
    //       value: ""
    //     },



    //   ];

    //   let chartConfig = {
    //     type: 'tree',
    //     options: {
    //       link: {
    //         aspect: 'arc'
    //       },
    //       maxSize: 2,
    //       minSize: 1,
    //       node: {
    //         size: 12,
    //         type: 'diamond',
    //         tooltip: {
    //           padding: '8px 10px',
    //           borderRadius: '3px',
    //         },
    //         label: {
    //           color: 'white',
    //           fontWeight: 'bold',      

    //         }
    //       },
    //       'node[cls-fam]': {
    //         size: 12,
    //         type: 'circle',
    //         tooltip: {
    //           padding: '8px 10px',
    //           borderRadius: '3px',
    //         },
    //         label: {
    //           color: 'white',
    //           fontWeight: 'bold',
    //           "hook":"node:plot=0;index=2",

    //         }
    //       },
    //       'node[cls-bog]': {
    //         size: 18,
    //         type: 'circle',
    //         tooltip: {
    //           padding: '8px 10px',
    //           borderRadius: '3px',
    //         },
    //         label: {
    //           color: 'white',
    //           fontWeight: 'bold'
    //         }
    //       }
    //     },
    //     series: chartData,
    //     backgroundColor:'none',
    //   };

    //   zingchart.render({
    //     id: 'myChart',
    //     data: chartConfig,
    //     height: '95%',
    //     width: '100%',
    //     output: 'canvas',
    //   });

    // });

    //   // zingchart.click = function(data){ 
    //   //         alert("Chart Clicked - ID: " + data["id"]); 
    //   //    }

    //   zingchart.bind("myChart","node_click",function(p){
    //     zingchart.exec("myChart","updateobject", {
    //         "type":"label",
    //         "data":{
    //             "id":"label1",
    //             "text":p.value,
    //             "hook":"node:plot="+p.plotindex+";index="+p.nodeindex,
    //             "visible":true
    //         }
    //       });
    //       alert("hello");
    //   });}

    //http://www.d3noob.org/2014/01/tree-diagrams-in-d3js_11.html
    var treeData = [
      {
        "name": "Deep Learning",
        "parent": "null",
        "verticalValue": 0,
        "level": 1,
        "label": "Algorithms",
        "children": [

          {
            "name": "Multi Modal",
            "parent": "Deep Learning Algorithms",
            "verticalValue": -15,
            "level": 2,
            "children": [
              {
                "name": "MRI + DTI",
                "parent": "Multi Modal",
                "verticalValue": -15 - 7,
                "level": 3
              },
              {
                "name": "MRI + Tabular",
                "parent": "Multi Modal",
                "verticalValue": -15 + 7,
                "level": 3
              }
            ]
          },
          {
            "name": "Vision Tranformers",
            "parent": "Deep Learning Algorithms",
            "verticalValue": -7.5,
            "level": 2
          },
          {
            "name": "CNN Models",
            "parent": "Deep Learning Algorithms",
            "verticalValue": 0,
            "level": 2,
            "children": [
              {
                "name": "2D Models",
                "parent": "CNN Models",
                "verticalValue": - 12.5,
                "level": 3,
                "tableId": "2dmodels",

              },
              {
                "name": "3D Models",
                "parent": "CNN Models",
                "verticalValue": 12.5,
                "level": 3,
                "children": [
                  {
                    "name": "From Scratch",
                    "parent": "3D Models",
                    "verticalValue": 12.5 - 12.5,
                    "level": 4,
                  },
                  {
                    "name": "Pre Trained",
                    "parent": "3D Models",
                    "verticalValue": 12.5 + 12.5,
                    "level": 4,
                  }
                ]
              }
            ]
          },
          {
            "name": "Dim. Reduction",
            "parent": "Deep Learning Algorithms",
            "verticalValue": 7.5,
            "level": 2,
          },
          {
            "name": "GANs",
            "parent": "Deep Learning Algorithms",
            "verticalValue": 15,
            "level": 2,
            "children": [
              {
                "name": "Style Transfer",
                "parent": "GANs",
                "verticalValue": 15 - 7.5,
                "level": 3,
                "tableId": "styleTransfer",
              },
              {
                "name": "Dim Reduction",
                "parent": "GANs",
                "verticalValue": 15 + 7.5,
                "level": 3,
                "tableId": "DimReduction",
              },
            ]
          }

        ]
      }
    ];


    // ************** Generate the tree diagram	 *****************
    var margin = { top: 50, right: 120, bottom: 20, left: 220 },
      width = 650 //(window.innerWidth),
    height = 450 //(window.innerHeight * 0.5);

    var i = 0,
      duration = 750,
      root;

    var tree = d3.layout.tree()
      .size([height, width]);

    var diagonal = d3.svg.diagonal()
      .projection(function (d) { return [d.y, d.x]; });

    var svg = d3.selectAll("#chartdiv")
      .append("svg")
      .attr("width", width)
      .attr("height", height + 20)
      .append("g")
      .attr("transform", "translate(" + (width * 0.1) + "," + (20) + ")");

    root = treeData[0];
    root.x0 = height / 2;
    root.y0 = 0;

    update(root);

    d3.select(self.frameElement).style("height", "700px");

    function update(source) {

      // Compute the new tree layout.
      var nodes = tree.nodes(root).reverse(),
        links = tree.links(nodes);

      // Normalize for fixed-depth.
      nodes.forEach(function (d) { d.y = d.depth * 170; });
      nodes.forEach(function (d) { d.x = d.verticalValue + d.x; });

      // Update the nodes…
      var node = svg.selectAll("g.node")
        .data(nodes, function (d) { return d.id || (d.id = ++i); });

      // Enter any new nodes at the parent's previous position.
      var nodeEnter = node.enter().append("g")
        .attr("class", "node")
        .attr("transform", function (d) {

          return "translate(" + source.y0 + "," + source.x0 + ")";
        })
        .on("click", click);

      nodeEnter.append("circle")
        .attr("r", 1e-6)
        .style("fill", function (d) {
          if (!d._children && !d.children) {
            return "#000"
          }

          return d._children ? "#000" : "#fff";
        });

      nodeEnter.append("text")
        .attr("dx", "-2em")
        .attr("dy", "-1.75em")
        .attr("fill", "#ffffff")
        .html(function (d) {
          if (d.level == 1) {
            return "<tspan dx='-4em' dy='2.6em'>" + "Deep Learning" + "</tspan>" + "<tspan dx='-6em' dy='1.6em'>" + "Alogrithms" + "</tspan>";
          }
          else {
            return d.name;
          }
        })
        .style("fill-opacity", 1e-6)
        .style("font-size", "12"); // Font issue here


      // Transition nodes to their new position.
      var nodeUpdate = node.transition()
        .duration(duration)
        .attr("transform", function (d) {
          var updatedY0 = d.y + 20;
          var updatedX0 = d.x + 20;
          return "translate(" + d.y + "," + d.x + ")";
        });

      nodeUpdate.select("circle")
        .attr("r", 12)
        .style("fill", function (d) {
          if (!d._children && !d.children) {
            return "#000"
          }

          return d._children ? "#000" : "#fff";
        });

      nodeUpdate.select("text")
        .style("fill-opacity", 1);

      // Transition exiting nodes to the parent's new position.
      var nodeExit = node.exit().transition()
        .duration(0)
        .attr("transform", function (d) { return "translate(" + source.y + "," + source.x + ")"; })
        .remove();

      nodeExit.select("circle")
        .attr("r", 1e-6);

      nodeExit.select("text")
        .style("fill-opacity", 1e-6);

      // Update the links…
      var link = svg.selectAll("path.link")
        .data(links, function (d) { return d.target.id; });

      // Enter any new links at the parent's previous position.
      link.enter().insert("path", "g")
        .attr("class", "link")
        .attr("d", function (d) {
          var o = { x: source.x0, y: source.y0 };
          return diagonal({ source: o, target: o });
        });

      // Transition links to their new position.
      link.transition()
        .duration(duration)
        .attr("d", diagonal);

      // Transition exiting nodes to the parent's new position.
      link.exit().transition()
        .duration(0)
        .attr("d", function (d) {
          var o = { x: source.x, y: source.y };
          return diagonal({ source: o, target: o });
        })
        .remove();

      // Stash the old positions for transition.
      nodes.forEach(function (d) {
        d.x0 = d.x;
        d.y0 = d.y;
      });
    }

    console.log("Root", root)
    var result = [];
    var indexForAnimation = 0;
    var interval;
    var onGoingAnimation = true;
    startAnimation();

    function startAnimation() {

      onGoingAnimation = true;
      document.getElementById("tableForAnimation").classList.add("d-none");

      interval = setInterval(animation, 1000);
      // timeout = setTimeout(animation, 2000);
      var startingNode = root
      var end = 20
      var queue = [root]


      result = [];
      while (queue.length > 0) {
        const current = queue.shift();
        if (current === null) continue;
        result.push(current);
        console.log("Total Children", current.children)
        try {
          for (const child of current.children) {
            console.log("Here Child", child)
            queue.push(child);
          }
        }
        catch {

        }
      }
      closeTreeNodes();
      indexForAnimation = 0;
      // cancelInterval()
    }

    console.log("Entire Tree", result)

    function cancelInterval() {
      animationOn = false;
      document.getElementById("tableForAnimation").classList.remove("d-none");
      clearInterval(interval);

      for (var i = 0; i < result.length; i++) {

        if (result[i]._children) {
          result[i].children = result[i]._children;
          result[i]._children = null;
        }
        update(result[i]);
      }

    }

    // Close all tree Nodes
    function closeTreeNodes() {
      for (var i = 0; i < result.length; i++) {
        result[i]._children = result[i].children;
        result[i].children = null;
        update(result[i]);
      }
    }

    function animation() {
      console.log("D", result[indexForAnimation], indexForAnimation)

      if (indexForAnimation > 13) {
        // indexForAnimation = 0
        clearInterval(interval);
        cancelInterval() // clear interval when animation is done
        return;
      }

      while (!result[indexForAnimation]?.children && !result[indexForAnimation]?._children) {
        indexForAnimation += 1;
        console.log(indexForAnimation)
        if (indexForAnimation > 13) {
          // closeTreeNodes()
          clearInterval(interval);
          cancelInterval();
          break;
        }
      }

      result[indexForAnimation].children = result[indexForAnimation]?._children;
      result[indexForAnimation]._children = null;
      update(result[indexForAnimation]);

      indexForAnimation += 1
      console.log(indexForAnimation)
      if (indexForAnimation > 13) {
        clearInterval(interval)
        // closeTreeNodes()
        cancelInterval()
        return;
      }
    }


    // Toggle children on click.
    var tableOpened;

    function click(d) {

      if (!d.children && !d._children) {
        cancelInterval();

        if (tableOpened) {
          document.getElementById(tableOpened).classList.add("d-none");
        }

        document.getElementById(d.tableId).classList.remove("d-none");
        tableOpened = d.tableId;

      }
      if (d.children) {
        d._children = d.children;
        d.children = null;

      } else {
        d.children = d._children;
        d._children = null;
      }
      update(d);
    }

  </script>

  <script>
    var posterLink = document.getElementById('poster-link');
    var posterDisabled = true; // change this condition to whatever you need

    if (posterDisabled) {
      posterLink.onclick = function(event) {
        event.preventDefault();
      };
      posterLink.style.color = '#888'; // optional: change the link color to indicate it's disabled
    }
  </script>



</body>

</html>